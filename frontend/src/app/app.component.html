<div class="app-shell" [class.admin-shell]="isAdminRoute">
  <ng-container *ngIf="!isAdminRoute; else adminLayout">
    <header class="top-nav">
      <div class="container top-nav-inner">
      <div class="brand">
        <div class="brand-mark">K</div>
        <div>
          <div>KarikaRide</div>
          <small>{{ 'shared.title' | transloco }}</small>
        </div>
      </div>
      <nav class="nav-links">
        <a routerLink="/public" routerLinkActive="active" [routerLinkActiveOptions]="{ exact: true }">
          {{ 'public.nav.rent' | transloco }}
        </a>
        <a routerLink="/public/service" routerLinkActive="active">{{ 'public.nav.service' | transloco }}</a>
        <a routerLink="/public/contact" routerLinkActive="active">{{ 'public.nav.contact' | transloco }}</a>
      </nav>
      <div class="nav-actions">
        <div class="lang-selector" (click)="menu.toggle($event)">
          <img [src]="currentFlagUrl" class="flag-icon" />
          <p-menu #menu [model]="languageItems" [popup]="true">
            <ng-template pTemplate="item" let-item>
              <a class="p-menuitem-link" (click)="item.command?.($event)">
                <img [src]="item.flag" class="flag-icon" />
                <span class="p-menuitem-text">{{ item.label }}</span>
              </a>
            </ng-template>
          </p-menu>
        </div>
      </div>
    </div>
  </header>

    <main class="container page-container">
      <router-outlet></router-outlet>
    </main>
  </ng-container>

  <ng-template #adminLayout>
    <div class="admin-layout">
      <aside class="admin-sidebar">
        <div class="brand">
          <div class="brand-mark">A</div>
          <div>
            <div>KarikaRide</div>
            <small>{{ 'admin.nav.console' | transloco }}</small>
          </div>
        </div>
        <nav class="admin-nav">
          <a routerLink="/admin/dashboard" routerLinkActive="active">{{ 'admin.dashboard.title' | transloco }}</a>
          <a routerLink="/admin/bicycles" routerLinkActive="active">{{ 'admin.bicycles.title' | transloco }}</a>
          <a routerLink="/admin/categories" routerLinkActive="active">{{ 'admin.categories.title' | transloco }}</a>
          <a routerLink="/admin/accessories" routerLinkActive="active">{{ 'admin.accessories.title' | transloco }}</a>
          <a routerLink="/admin/rentals" routerLinkActive="active">{{ 'admin.rentals.title' | transloco }}</a>
          <a routerLink="/admin/opening-hours" routerLinkActive="active">{{ 'admin.openingHours.title' | transloco }}</a>
          <a routerLink="/admin/service-capacity" routerLinkActive="active">{{ 'admin.serviceCapacity.title' | transloco }}</a>
          <a routerLink="/admin/login" class="logout">{{ 'admin.nav.logout' | transloco }}</a>
        </nav>
      </aside>
      <main class="admin-content">
        <div class="container">
          <router-outlet></router-outlet>
        </div>
      </main>
    </div>
  </ng-template>
</div>

<p-dialog
  [(visible)]="showLangModal"
  [modal]="true"
  [closable]="false"
  [style]="{ width: '90vw', height: '90vh' }"
>
  <h2>{{ 'language.select_title' | transloco }}</h2>

  <div class="language-grid">
    <div class="lang-option" *ngFor="let lang of languages" (click)="chooseLanguage(lang.code)">
      <img [src]="flagService.getFlagUrl(lang.code)" class="flag-large" />
      <span>{{ lang.name }}</span>
    </div>
  </div>
</p-dialog>
